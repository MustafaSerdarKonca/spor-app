<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Spor App</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Spor App">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1c1c1e" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">

    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <div id="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1>Spor App</h1>
                <p>Antrenmanlarını takip et.</p>
            </div>

            <!-- Login Form -->
            <form id="login-form">
                <div class="form-group">
                    <input type="email" id="login-email" class="form-control" placeholder="E-posta" required
                        autocomplete="email">
                </div>
                <div class="form-group">
                    <input type="password" id="login-password" class="form-control" placeholder="Şifre" required
                        autocomplete="current-password">
                </div>
                <button type="submit" class="btn-block">Giriş Yap</button>
                <div class="auth-divider">veya</div>
                <button type="button" class="btn-block btn-google" id="btn-google-login">
                    <svg viewBox="0 0 24 24" width="18" height="18">
                        <path fill="currentColor"
                            d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                        <path fill="currentColor"
                            d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                        <path fill="currentColor"
                            d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z" />
                        <path fill="currentColor"
                            d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                    </svg>
                    Google ile Giriş
                </button>
                <button type="button" class="btn-text" onclick="toggleAuthMode()">Hesabın yok mu? Kayıt Ol</button>
            </form>

            <!-- Register Form -->
            <form id="register-form" style="display:none">
                <div class="form-group">
                    <input type="email" id="reg-email" class="form-control" placeholder="E-posta" required
                        autocomplete="email">
                </div>
                <div class="form-group">
                    <input type="password" id="reg-password" class="form-control" placeholder="Şifre" required
                        autocomplete="new-password">
                </div>
                <button type="submit" class="btn-block">Kayıt Ol</button>
                <button type="button" class="btn-text" onclick="toggleAuthMode()">Zaten hesabın var mı? Giriş
                    Yap</button>
            </form>
        </div>
    </div>

    <!-- Main App (Initially Hidden) -->
    <div id="app-container" style="display: none;">
        <header>
            <div class="header-top"
                style="display:flex; justify-content:space-between; align-items:center; padding: 0 16px; height: 40px;">
                <span style="font-weight:700; font-size:18px;">SporApp</span>
                <button id="btn-logout" class="btn-text" style="font-size:14px; color:var(--primary);">Çıkış</button>
            </div>
            <div class="day-tabs">
                <!-- Populated by JS -->
            </div>
        </header>

        <main id="exercise-list">
            <!-- populated by JS -->
        </main>

        <!-- Floating Action Button -->
        <button class="fab" id="fab-add" aria-label="Hareket Ekle">+</button>

        <!-- Modal -->
        <div class="modal-overlay" id="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <h2 class="modal-title" id="modal-title">Yeni Hareket</h2>
                    <button class="btn-icon" id="close-modal">✕</button>
                </div>
                <form id="exercise-form">
                    <div class="form-group">
                        <label>Hareket Adı</label>
                        <input type="text" id="inp-name" class="form-control" placeholder="Örn: Squat" required>
                    </div>
                    <div class="form-group">
                        <label>Kas Grubu / Etiket (Opsiyonel)</label>
                        <input type="text" id="inp-tag" class="form-control" placeholder="Örn: Bacak">
                    </div>
                    <div class="form-group">
                        <label>Not (Opsiyonel)</label>
                        <input type="text" id="inp-note" class="form-control" placeholder="Örn: 4 set 12 tekrar">
                    </div>
                    <div class="form-group">
                        <label>Görsel Ekle (Opsiyonel)</label>
                        <div class="file-input-wrapper">
                            <input type="file" id="inp-image" accept="image/*" class="form-control-file">
                            <div id="image-preview" class="image-preview-box">Görsel Seç</div>
                        </div>
                    </div>
                    <button type="submit" class="btn-block">Kaydet</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Script -->
    <script type="module" src="js/app.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(() => console.log('SW Registered'))
                .catch(e => console.error('SW Fail', e));
        }
    </script>
</body>

</html>